<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sky.mapper.SetmealDishMapper">
  <sql id="query_setmealDish">
    <!-- 普通查询 -->
    select id,setmeal_id,dish_id,name,price,price from setmeal_dish
  </sql>
  <!--    修改菜品套餐关系,就是修改套餐内的价格，名字，数量-->
  <update id="updateSetmealDish">
    update setmeal_dish
    <set>
      price = #{price},copies = #{copies},name = #{name}
    </set>
    <where>
      dish_id = #{dishId} and setmeal_id = #{setmealId}
    </where>
  </update>
  
  <!--    根据套餐id删除对应数据-->
  <delete id="deleteSetmealDishById">
    delete
    from setmeal_dish
    where setmeal_id = #{setmealId}
  </delete>
  
  <!--    新增套餐菜品关系-->
  <insert id="insertSetmealDish">
    insert into setmeal_dish
    values (null, #{setmealId}, #{dishId}, #{name}, #{price}, #{copies})
  </insert>
  
  <!--    根据套餐id查询菜品-->
  <select id="selectSetmealDishById" resultType="com.sky.entity.SetmealDish">
    <!--        <include refid="query_setmealDish" />-->
    select * from sky_take_out.setmeal_dish where setmeal_id = #{setmealId}
  </select>
</mapper>

